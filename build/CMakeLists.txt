CMAKE_MINIMUM_REQUIRED(VERSION 3.8)

PROJECT(DALI-ADDONS CXX)

SET(CMAKE_CXX_STANDARD 14)

SET(ROOT_DIR ${CMAKE_CURRENT_SOURCE_DIR}/../dali)

# look for addons cmake files
FILE(GLOB_RECURSE FILES ${ROOT_DIR}/*/*.cmake)

SET( PUBLIC_DALI_HEADERS $ENV{DESKTOP_PREFIX}/include )
SET( PRIVATE_DALI_HEADERS ${ROOT_DIR}/../../dali-core
        ${ROOT_DIR}/../../dali-adaptor
        ${ROOT_DIR}/../../dali-toolkit
        )

FOREACH( IN_CMAKE IN ITEMS ${FILES} )
    GET_FILENAME_COMPONENT( CURRENT_DIR ${IN_CMAKE} DIRECTORY )
    INCLUDE( ${IN_CMAKE} )
    ADD_LIBRARY( ${ADDON_NAME} SHARED ${SOURCES} )
    TARGET_INCLUDE_DIRECTORIES( ${ADDON_NAME} BEFORE
            PUBLIC
            ${PUBLIC_DALI_HEADERS}
            ${PRIVATE_DALI_HEADERS} )
    MESSAGE( STATUS "${IN_CMAKE}")

    INSTALL( FILES ${CMAKE_CURRENT_BINARY_DIR}/lib${ADDON_NAME}.so DESTINATION /tmp/addons  )
ENDFOREACH()